<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Tue Nov 17 10:08:50 PST 2015 -->
<title>Quantile (datafu-pig 1.3.0 API)</title>
<meta name="date" content="2015-11-17">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Quantile (datafu-pig 1.3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../datafu/pig/stats/Median.html" title="class in datafu.pig.stats"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../datafu/pig/stats/QuantileUtil.html" title="class in datafu.pig.stats"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?datafu/pig/stats/Quantile.html" target="_top">Frames</a></li>
<li><a href="Quantile.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.apache.pig.EvalFunc">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.apache.pig.EvalFunc">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">datafu.pig.stats</div>
<h2 title="Class Quantile" class="title">Class Quantile</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.pig.EvalFunc&lt;T&gt;</li>
<li>
<ul class="inheritance">
<li><a href="../../../datafu/pig/util/SimpleEvalFunc.html" title="class in datafu.pig.util">datafu.pig.util.SimpleEvalFunc</a>&lt;org.apache.pig.data.Tuple&gt;</li>
<li>
<ul class="inheritance">
<li>datafu.pig.stats.Quantile</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../datafu/pig/stats/Median.html" title="class in datafu.pig.stats">Median</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Quantile</span>
extends <a href="../../../datafu/pig/util/SimpleEvalFunc.html" title="class in datafu.pig.util">SimpleEvalFunc</a>&lt;org.apache.pig.data.Tuple&gt;</pre>
<div class="block">Computes <a href="http://en.wikipedia.org/wiki/Quantile" target="_blank">quantiles</a>
 for a <b>sorted</b> input bag, using type R-2 estimation.

 <p>
 N.B., all the data is pushed to a single reducer per key, so make sure some partitioning is 
 done (e.g., group by 'day') if the data is too large.  That is, this isn't distributed quantiles.
 </p>
 
 <p>
 Note that unlike datafu's StreamingQuantile algorithm, this implementation gives
 <b>exact</b> quantiles.  But, it requires that the input bag to be sorted.  Quantile must spill to 
 disk when the input data is too large to fit in memory, which will contribute to longer runtimes. 
 Because StreamingQuantile implements accumulate it can be much more efficient than Quantile for 
 large input bags which do not fit well in memory.
 </p>
 
 <p>The constructor takes a single integer argument that specifies the number of evenly-spaced 
 quantiles to compute, e.g.,</p>
 
 <ul>
   <li>Quantile('3') yields the min, the median, and the max
   <li>Quantile('5') yields the min, the 25th, 50th, 75th percentiles, and the max
   <li>Quantile('101') yields the min, the max, and all 99 percentiles.
 </ul>
 
 <p>Alternatively the constructor can take the explicit list of quantiles to compute, e.g.</p>

 <ul>
   <li>Quantile('0.0','0.5','1.0') yields the min, the median, and the max
   <li>Quantile('0.0','0.25','0.5','0.75','1.0') yields the min, the 25th, 50th, 75th percentiles, and the max
 </ul>

 <p>The list of quantiles need not span the entire range from 0.0 to 1.0, nor do they need to be evenly spaced, e.g.</p>
 
 <ul>
   <li>Quantile('0.5','0.90','0.95','0.99') yields the median, the 90th, 95th, and the 99th percentiles
   <li>Quantile('0.0013','0.0228','0.1587','0.5','0.8413','0.9772','0.9987') yields the 0.13th, 2.28th, 15.87th, 50th, 84.13th, 97.72nd, and 99.87th percentiles
 </ul>
 
 Example:
 <pre>
 <code>

 define Quantile datafu.pig.stats.Quantile('0.0','0.5','1.0');

 -- input: 9,10,2,3,5,8,1,4,6,7
 input = LOAD 'input' AS (val:int);

 grouped = GROUP input ALL;

 -- produces: (1,5.5,10)
 quantiles = FOREACH grouped {
   sorted = ORDER input BY val;
   GENERATE Quantile(sorted);
 }
 </code></pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../datafu/pig/stats/Median.html" title="class in datafu.pig.stats"><code>Median</code></a>, 
<a href="../../../datafu/pig/stats/StreamingQuantile.html" title="class in datafu.pig.stats"><code>StreamingQuantile</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.apache.pig.EvalFunc">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.pig.EvalFunc</h3>
<code>org.apache.pig.EvalFunc.SchemaType</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.pig.EvalFunc">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.pig.EvalFunc</h3>
<code>log, pigLogger, reporter, returnType</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../datafu/pig/stats/Quantile.html#Quantile-java.lang.String...-">Quantile</a></span>(java.lang.String...&nbsp;k)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>org.apache.pig.data.Tuple</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../datafu/pig/stats/Quantile.html#call-org.apache.pig.data.DataBag-">call</a></span>(org.apache.pig.data.DataBag&nbsp;bag)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>org.apache.pig.impl.logicalLayer.schema.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../datafu/pig/stats/Quantile.html#outputSchema-org.apache.pig.impl.logicalLayer.schema.Schema-">outputSchema</a></span>(org.apache.pig.impl.logicalLayer.schema.Schema&nbsp;input)</code>
<div class="block">Override outputSchema so we can verify the input schema at pig compile time, instead of runtime</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.datafu.pig.util.SimpleEvalFunc">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;datafu.pig.util.<a href="../../../datafu/pig/util/SimpleEvalFunc.html" title="class in datafu.pig.util">SimpleEvalFunc</a></h3>
<code><a href="../../../datafu/pig/util/SimpleEvalFunc.html#exec-org.apache.pig.data.Tuple-">exec</a>, <a href="../../../datafu/pig/util/SimpleEvalFunc.html#getReturnType--">getReturnType</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.pig.EvalFunc">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.pig.EvalFunc</h3>
<code>allowCompileTimeCalculation, finish, getArgToFuncMapping, getCacheFiles, getInputSchema, getLogger, getPigLogger, getReporter, getSchemaName, getSchemaType, getShipFiles, isAsynchronous, progress, setInputSchema, setPigLogger, setReporter, setUDFContextSignature, warn</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Quantile-java.lang.String...-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Quantile</h4>
<pre>public&nbsp;Quantile(java.lang.String...&nbsp;k)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="call-org.apache.pig.data.DataBag-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;org.apache.pig.data.Tuple&nbsp;call(org.apache.pig.data.DataBag&nbsp;bag)
                               throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="outputSchema-org.apache.pig.impl.logicalLayer.schema.Schema-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>outputSchema</h4>
<pre>public&nbsp;org.apache.pig.impl.logicalLayer.schema.Schema&nbsp;outputSchema(org.apache.pig.impl.logicalLayer.schema.Schema&nbsp;input)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../datafu/pig/util/SimpleEvalFunc.html#outputSchema-org.apache.pig.impl.logicalLayer.schema.Schema-">SimpleEvalFunc</a></code></span></div>
<div class="block">Override outputSchema so we can verify the input schema at pig compile time, instead of runtime</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../datafu/pig/util/SimpleEvalFunc.html#outputSchema-org.apache.pig.impl.logicalLayer.schema.Schema-">outputSchema</a></code>&nbsp;in class&nbsp;<code><a href="../../../datafu/pig/util/SimpleEvalFunc.html" title="class in datafu.pig.util">SimpleEvalFunc</a>&lt;org.apache.pig.data.Tuple&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>input</code> - input schema</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>call to super.outputSchema in case schema was defined elsewhere</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../datafu/pig/stats/Median.html" title="class in datafu.pig.stats"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../datafu/pig/stats/QuantileUtil.html" title="class in datafu.pig.stats"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?datafu/pig/stats/Quantile.html" target="_top">Frames</a></li>
<li><a href="Quantile.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.apache.pig.EvalFunc">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.apache.pig.EvalFunc">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
